Usage Instructions for AutoNMR:
1. Place the following files in <Topspin Home>/exp/stan/nmr/py/user/
	FAM_AutoNMR.py	Customizable AutoNMR startup script
	FAM_Tools.py		Source script for AutoNMR operations
2. In the Topspin command line, type 'edpy FAM_AutoNMR.py' to open the file for editing.
3. In the edpy window that opens, select FAM_AutoNMR.py.
4. Save as a different file name. Be sure this new name has the '.py' extension.
5. Make the following edits to uniquely identify your customized AutoNMR start script:
	5a. Edit the title variable (NO SPACES!).  This variable will be included in the setup wizard window titles and output text file names.	
	5b. Edit the extratxt variable.  This variable will appear in the setup wizard Start dialog, uniquely identifying your custom AutoNMR script.	
6. To utilize the AutoNMR manual input approach, edit the following variables:
	6a. The funclt list variable.
		- Leave this variable empty (i.e. funclt=[]). If left empty, the setup wizard will offer an interactive choice of input methods.
		OR...
		- Append the funclt variable list with the input methods that are needed for entering different types of information for automated acquisition.  See below for a description of each input method.
	6b. The parlt variable. Fill this list variable with the names of all experiment parameter sets that will be used. The setup wizard will offer a choice between all samples using the entire parlt list, or if certain samples should run select parameter sets.
7. Save the edits you have made.
8. To begin the AutoNMR setup wizard, type the name of the new file in the Topspin command line.
	8a. For manual input, click the 'Manual' button, then proceed to answer the prompted questions.
	8b. For text-file input, click the 'Text File' button, then enter the full path to the setup text file (see below). The default path to this file is .../data/<User Name>/nmr/.
9. Once all setup information has been input, a confirmation screen will appear with the details of planned automated data acquisition. This information will also appear in the terminal window started with Topspin. If setup information was input using the manual input method, a text file will be generated in the default path for use with the text file input approach.
10. Click the 'Confirm' button to proceed with automated data acquisition.

AutoNMR methods for Manual input or Text File input:
Below is a brief description of the input methods for the Manual approach used by the AutoNMR setup wizard.
The names of desired methods should be appended to the funclt variable in the startup script.
These methods closely correspond to the tags used to identify variables in the Text File input approach.
Required methods are noted, and must be included in text file input. Manual input automatically uses required methods.
Other differences are noted for Manual and Text File inputs.
series_watstd <Optional>
	Allows the option to use a 90/10%,H2O/D2O standard sample for initial 3D shimming before sample series data is acquired.
	default = 0
	(Manual) - Input water standard sample position. Input of 0 deselects this option.
	(Text File) - Set '_series_watstd' to sample position number. Set to '0' to deselect this option.
sample_num <Required>
	Sets the number of samples in the series for AutoNMR automated data acquisition.
	default = 10
	(Manual) - Input number of samples in series.
	(Text File) - This number is inferred from the number of rows of sample information (see below).
sample_names <Required>
	Defines unique sample names AutoNMR uses for folder names, experiment title labels, and output file names.
	default = ['sample1','sample2',...] one for each sample
	(Manual or Text File<_sample_name>) - Input unique sample names. NO SPACES! Use underscores instead.
sample_solvs <Required>
	Defines the deuterated solvent for each sample in the series that AutoNMR will use for the 'lock' command.
	default = ['CDCl3','CDCl3',...] one for each sample
	(Manual) - Can define the same solvent for the series or, alternatively, differently for each sample.
	(Text File<_sample_solvent>) - Input the solvent for each sample.
sample_positions <Required>
	Defines each sample position AutoNMR will use to submit to the SampleJet accessory for loading into spectrometer.
	default = [101,102,...] one for each sample
	(Manual or Text File<_sample_position>) - Input unique sample position number.
sample_parlts <Required>
	Defines the parameter sets (experiments) AutoNMR will load and run for each sample.
	default = ['standard1D']
	(Manual) - Can define the same parameter sets to be run for all samples in the series or, alternatively, differently for each sample.
	(Text File <_sample_parlt>) - Input the list of parameter sets for each sample, with NO SPACES after commas (see below).
sample_folderformat <Optional>
	Allows AutoNMR to use input parameters to create the folder name for each sample's set of experiments. Each parameter should be given a rank for the desired order to appear in the folder name. Parameters set to 0 are not used.
	default =
		Sample Name = 1
		Sample Solvent = 2
		Sample Position = 3
		Sample Conditions = 0 
		Date = 4
	(Manual or Text File<folder_format>) - Input rank number for each parameter to be used in sample folder names.
sample_conds <Optional>
	Allows a text space for user notes concerning sample conditions. This text can be included in folder names, and will be included in experiment title labels.
	default = ['','',...]
	(Manual or Text File<_sample_condition>) - Input unique sample condition notes. NO SPACES! Use underscores instead.
sample_NSmult <Optional>
	Allows AutoNMR to multiply the number of scans (NS) in all experiments performed on a specific sample by a specified factor. This is useful for low concentration samples that run the same parameter sets as other samples in the series.
	default = 1
	(Manual or Text File) - Input factor to multiply the number of scans performed.
sample_expadapt <Optional>
	Allows AutoNMR to use its adaptive spectral-width (SW) feature, with which optimum SW for each nucleus can be determined from 1D experiments, and then applied to subsequent nD experiments on the same sample.
	default = [0,0,...] one entry for each parameter set in a sample's parlt
	(Manual) - Input 1 for 1D experiments to determine optimum SW. Input 2 for nD experiments to adapt SW to previously determined optimum.  By definition, a 1D experiment set to 1 must be run before any experiments set to 2.
	(Text File) - Set '_sample_adaptlt' list entries according to rules for manual input and index of parlt.
series_getprosol <Optional>
	Allows AutoNMR to retrieve prosol parameters for pulse power and lengths.
	default = 1
	(Manual) - Input 'y' to retrieve prosol parameters, or input 'n' to use parameter set values.
	(Text File) - Set '_series_getprosol' to '1' to retrieve prosol parameters, or '0' to use parameter set values.
series_findH2Ooffset <Optional>
	Allows AutoNMR to automatically determine the offset of the large HDO signal in H2O or D2O containing solvents.
	default = 0
	(Manual) - Input 'y' to determine the HDO offset, or input 'n' to use the offset from the parameter set.
	(Text File) - Set '_series_findH2Ooffset' to '1' to determine the HDO offset, or '0' to use the offset from the parameter set.
series_wobb <Optional>
	Allows AutoNMR to tune the the NMR probe after each new sample is inserted into the spectrometer.
	default = 0
	(Manual) - Input 'y' to tune the probe for each new sample, or input 'n' skip probe tuning.
	(Text File) - Set '_series_wobb' to '1' to tune the probe for each new sample, or '0' to skip probe tuning.
series_shimcmd <Optional>
	Sets the TopShim command to be used after each new sample is inserted into the spectrometer. The first part of this entry MUST BE 'topshim', followed by any additional desired shim parameters (see Bruker manuals).
	default = 'topshim tuneb tunea'
	(Manual) - Input the desired topshim command to run, or leave blank to skip shimming.
	(Text File) - Set '_series_shimcmd' to the desired topshim command to run, or leave blank to skip shimming.
series_autogain <Optional>
	Allows AutoNMR to optimize the reciever gain (RG) for each experiment.
	default = 0
	(Manual) - Input 'y' to determine the optimum RG for each experiment, or input 'n' to use the RG from the parameter set.
	(Text File) - Set '_series_autogain' to '1' to determine the optimum RG for each experiment, or '0' to use the RG from the parameter set.

Text File Input
The text below is an example of the contents of a file submitted to AutoNMR for the Text File Input approach. In this case, 3 samples are submitted for
automated acquisition. 

sample_info
loop_
_sample_name
_sample_solvent
_sample_position
_sample_parlt
_sample_condition
_sample_NSmult
_sample_adaptlt
U1   H2O+D2O   102   standard1D,tocsy   pH_3.5   1   1,2   
U2   CDCl3   103   standard1D,hsqc,tocsy   100mM   1   1,2,2   
U3   Acetone   104   standard1D,13C_1D   50mM   2   0,0   

folder_format
_sample_name              2
_sample_solvent            3
_sample_position           1
_sample_condition         0
_date_tag                       0

series_params
_series_watstd                101
_series_getprosol            1
_series_findH2Ooffset     1
_series_wobb                  1
_series_shimcmd             topshim ls tuneb tunea
_series_autogain             1

end_

The 'sample_info' loop first contains the names of the sample specific inputs (see input methods above) in the order they appear for each sample info row that immediately follow the input names.
Their names (1st column for sample info) are U1, U2, and U3. 
Their solvents (2nd column) are H2O+D2O, CDCl3, and Acetone.
Their positions (3rd column) are 102, 103, and 104.
Their experimental parameters (4th column) are denoted, separated by commas (NO SPACES!).
Their conditions notes (5th column) are included (NO SPACES!).
Their NS multiplier factor (6th column) are denoted.
Their adaptive SW values (7th column) are denoted, separated by commas (NO SPACES!).
Notice that the number of values in this column match the number of parameter sets (4th column). For example, the U2 sample will use the standard1D experiment to determine the optimum SW
for the proton dimension.  This value will be used to adapt the proton SW parameters for the hsqc and tocsy experiments of U2.

The folder_format variables given will create sample folder names using the sample_position, sample_name, and sample_solvent variables.
For example, data for the third sample will be collected in a folder named '104.U3.Acetone'.

The series_params variables give the functions performed across the series of samples.
For example, a water standard for 3D shimming is found at position 101, each experiment will retrieve prosol parameters,
samples containing H2O or D2O will have their offset automatically determined, the probe will be tuned for each new sample,
samples will be shimmed using 'topshim ls tuneb tunea', and the RG will be optimized for each experiment.
